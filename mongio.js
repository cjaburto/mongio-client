(function(){var t,r;r=void 0===window.socket||""===window.socket||null===window.socket?io():window.socket,t=function(){function t(){}return t.prototype.use=function(t){return new Promise(function(e,n){return r.emit("connectDb",t,function(t){return"ok"===t.status&&e(t.res),"err"===t.status?n(t.err):void 0})})},t.prototype.collection=function(t){return{find:function(e){return{vlimit:void 0,vskip:void 0,vsort:void 0,vproy:void 0,limit:function(t){return this.vlimit=t,this},skip:function(t){return this.vskip=t,this},sort:function(t){return this.vsort=t,this},done:function(){return new Promise(function(n){return function(o,s){var i;return void 0===e&&(e={}),void 0===n.vsort&&(n.vsort={_id:-1}),i={collection:t,query:e,skip:n.vskip,limit:n.vlimit,sort:n.vsort},r.emit("find",i,function(t){return"ok"===t.status&&o(t.res),"err"===t.status?s(t.err):void 0})}}(this))}}},remove:function(e){return new Promise(function(n,o){var s;return s={collection:t,query:e},r.emit("remove",s,function(t){return"ok"===t.status&&n(t.res),"err"===t.status?o(t.err):void 0})})},findOne:function(e){return new Promise(function(n,o){var s;return s={collection:t,query:e},r.emit("findOne",s,function(t){return"ok"===t.status&&n(t.res),"!exist"===t.status&&o("!exist"),"err"===t.status?o(t.err):void 0})})},save:function(e,n){return new Promise(function(o,s){var i;return void 0===n&&(n=!1),i={collection:t,query:e,verify:n.verify},r.emit("save",i,function(t){switch(t.status){case"ok":return o(t.res);case"exist":return o("exist");case"err":return s(t.err)}})})},update:function(e,n,o){return new Promise(function(s,i){var u;return u={collection:t,query:e,update:n,options:o},r.emit("update",u,function(t){switch(t.status){case"ok":return s(t.res);case"err":return i(t.err)}})})},password:function(e){return new Promise(function(n,o){var s;return s={collection:t,user:e.user,newPass:e.newPass,oldPass:e.oldPass},r.emit("changePass",s,function(t){switch(res.status){case"ok":return n(t.res);case"!match":return n("!match");case"err":return o(t.err)}})})},stats:function(){return new Promise(function(e,n){return r.emit("colStats",t,function(t){return"ok"===t.status&&e(t.res),"err"===t.status?n(t.err):void 0})})},count:function(e){return new Promise(function(n,o){var s;return s={},s.collection=t,s.query=e,r.emit("count",s,function(t){return"ok"===t.status&&n(t.res),"err"===t.status?o(t.err):void 0})})},drop:function(){return new Promise(function(e,n){return r.emit("drop",t,function(t){return"ok"===t.status&&e(t.res),"err"===t.status?n(t.err):void 0})})}}},t.prototype.chkpasswd=function(t){return new Promise(function(e,n){var o;return o={query:t},r.emit("chkpasswd",o,function(t){switch(t.status){case"ok":return e(t.res);case"!match":return e("!match");case"err":return n(t.err)}})})},t.prototype.stats=function(){return new Promise(function(t,e){return r.emit("dbStats",function(r){return"ok"===r.status&&t(r.res),"err"===r.status?e(r.err):void 0})})},t.prototype.mongoimport=function(t){return new Promise(function(e,n){return r.emit("mongoimport",t,function(t){return"ok"===t.status&&e(t.res),"stderr"===t.status&&n(t.err),"err"===t.status?n(t.err):void 0})})},t}(),window.db=new t}).call(this);